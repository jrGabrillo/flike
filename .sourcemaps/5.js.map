{"version":3,"sources":["../../src/pages/coach/coach.module.ts","../../src/pages/coach/coach.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {CoachPage} from './coach';\n\n@NgModule({\n  declarations: [\n    CoachPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CoachPage),\n  ],\n    exports:[\n        CoachPage\n    ]\n})\nexport class CoachPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/coach/coach.module.ts","import {Component} from '@angular/core';\nimport {AlertController, IonicPage, LoadingController, NavController} from 'ionic-angular';\nimport {AppPreferences} from \"@ionic-native/app-preferences\";\nimport {FlikeUser} from \"../../models/flikeUser.model\";\nimport {AngularFireDatabase} from \"angularfire2/database\";\nimport * as globals from '../../providers/globals/globals';\nimport {VariablesProvider} from \"../../providers/variables/variables\";\nimport {ErrorLogProvider} from \"../../providers/error-log/error-log\";\nimport {TranslationsProvider} from \"../../providers/translations/translations\";\nimport * as moment from 'moment'\nimport {AdmobProvider} from \"../../providers/admob/admob\";\n\n\n@IonicPage()\n@Component({\n    selector: 'page-coach',\n    templateUrl: 'coach.html',\n\n})\nexport class CoachPage {\n    user:FlikeUser;\n    chatroomByUser:any = {tabs:{All:\"All\",group_2:\"Class 1\",group_3:\"Class 2\"}};\n    AllPage = \"AllPage\";\n    Group2Page = \"Group2Page\";\n    Group3Page = \"Group3Page\";\n    globals:any = globals;\n\n    constructor(public navCtrl: NavController,\n                public prefs: AppPreferences,\n                public loader: LoadingController,\n                public db: AngularFireDatabase,\n                public variables: VariablesProvider,\n                private errorHandler: ErrorLogProvider,\n                private alert: AlertController,\n                private translate: TranslationsProvider,\n                private admobService: AdmobProvider,\n\n    ) {\n\n        this.user = this.variables.user;\n        if (!this.user.id) this.navCtrl.setRoot(\"ActivationPage\")\n    }\n\n    ionViewDidLoad() {\n        if (this.variables.firebaseToken){\n            this.db.app.database().ref('/users/'+this.user.id)\n                .update({firebaseToken : this.variables.firebaseToken,lastConnection:moment.now()})\n                .catch( error => console.log(error))\n        }\n\n        if (this.user.id){\n            this.getChatroomByUser()\n        } else {\n            this.prefs.fetch(globals.userPrefs,\"user\")\n                .then (user => {\n                    if (!user.id) this.navCtrl.setRoot(\"ActivationPage\")\n                    else this.getChatroomByUser()\n                })\n        }\n    }\n\n    getChatroomByUser(){\n        let ref =   '/chatroomByUser/'+this.user.id;\n        let chatroomsRef = this.db.object(ref).snapshotChanges()\n            .subscribe( actionChatroomByUser => {\n\n                if (this.user.typeOfUser == globals.coachee && (\n                        this.chatroomByUser.showAdMob &&\n                        (!this.chatroomByUser.quote || this.chatroomByUser.quote != \"\") &&\n                        (!this.chatroomByUser.quoteImgUrl || this.chatroomByUser.quoteImgUrl != \"\"))\n                   ) {\n                    this.admobService.showAdmob().then( banner => {\n                    }).catch( error => console.log(error));\n                } else {\n                    this.admobService.hideAdmob().then( banner => {\n                    }).catch( error => this.errorHandler.sendError(\"coachPage, getChatroomByUser - hide adMob subscription\",error));\n                }\n\n                if (actionChatroomByUser.payload){\n                    this.chatroomByUser = actionChatroomByUser.payload.val();\n                } else {\n                    this.navCtrl.setRoot(\"ActivationPage\")\n                }\n                chatroomsRef.unsubscribe();\n            },error => {\n                this.errorHandler.sendError(\"coachPage, getChatroomByUser - chatroomsRef subscription\",error)\n            })\n    }\n\n    logout(){\n        let confirm = this.alert.create({\n            title: this.translate.getTranslation('logoutConfirm'),\n            buttons: [{\n                text:this.translate.getTranslation('ok'),\n                handler: () => {\n                    this.db.app.database().ref('/users/'+this.user.id).update({firebaseToken:null})\n                    this.variables.user = null;\n                    this.prefs.remove(globals.userPrefs,globals.userItem);\n                    this.prefs.remove(globals.userPrefs,globals.surveys);\n                    this.navCtrl.setRoot(\"ActivationPage\");\n                }\n        },this.translate.getTranslation('cancel')]\n        });\n        confirm.present()\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/coach/coach.ts"],"sourceRoot":""}